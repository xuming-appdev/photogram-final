<h1>List of users</h1>

<hr>
<div>
  <div>
    <table border="1">
      <tr>
        <th>
          Username
        </th>

        <th>
          Private?
        </th>

<th>
        </th>
        <th>
        </th>
      </tr>

<% @list_of_users.each do |a_user| %>
      <tr>
        <td>
          <%= a_user.username %>
        </td>

         <td>

         <% if a_user.private==true%>
         Yes
<%else%>
No
<%end%>
        </td>

<td>
<%if session.fetch(:user_id)!=nil%>   
<form action="/insert_follow_request" method="post">
<input type="hidden" name="query_recipient_id" value="<%a_user.id%>">
 <input type="hidden" name="query_sender_id" value="<%session.fetch(:user_id)%>">
 <input type="hidden" name="query_status" value="195">

              <button>
                Follow
              </button>
            </form>
      <%end%>
      </td>

        <td>

    <%if session.fetch(:user_id)!=nil%>   
    <% if a_user.private!=true%>
          <a href="/users/<%= a_user.username %>">
            Show details
          </a>
<%else%>
    <a href="/users">
            Show details
<%end%>
          </a>
          <%else%>
             <a href="/user_sign_in">
            Show details
            <%end%>
        </td>
      </tr>
      <% end %>

</hr>
